# 미국 전력 거래 시장 실시간 가격 예측 PoC 
본 코드는 외부 시스템에서 구동시키는 제품단의 머신러닝 파트로써 단독으로 실행되지 않습니다.

### 목차
[목적 및 목표](#목적-및-목표) <br>
[데이터 설명](#데이터-설명) <br>
[모델링](#모델링) <br>
[평가지표](#평가지표) <br>
[결과](#결과) <br>

<br>
<br>


## 목적 및 목표
미국 전력 거래 시장 진출을 위한 POC의 일환으로 시스템을 통한 전력 가격예측값 확인

- 실시간 다변량 시계열 데이터 수집 및 관리 (모델 학습 및 예측을 위해 다양한 소스의 데이터 수집 및 전처리)
- 사용자의 다양한 예측 요청(예측 대상, 예측 주기)

<br>
<br>

## 데이터 설명
7개 전력 시장 중 텍사스의 ERCOT의 실시간 거래 전력 가격(Realtime Price)예측을 위한 설명 인자

![1](https://user-images.githubusercontent.com/30097727/227439957-08a65991-8ec1-40ea-9cd3-2eec0171fd87.png)

<br>
<br>

## 모델링

#### 방법론
데이터가 추가됨에 따라 발전 가능한 시스템을 만들기 위해 회귀 모델 기반 예측 프로세스 구축

#### 알고리즘
- bagging 모델이나 Boosting tree 모델 사용 시 학습 데이터의 y값 범위에서 예측을 수행하는 한계가 존재
- 이를 극복하기 위해 선형 회귀 함수를 가진 결정트리인  M5P 알고리즘 사용
  - 입력 데이터의 변수 간의 상호 작용을 고려하여 가장 유용한 분할을 찾기 위해 재귀적으로 분할하는 top-down 방식 사용
  - 분석 후 생성된 의사결정나무에서 leaf 노드별로 선형 방정식을 생성
  - 선형 회귀 모델과 결정트리 모델의 장점을 결합하여 예측 정확도를 높임
  ![2-2](https://user-images.githubusercontent.com/30097727/227441124-e9a6003a-e953-4629-ad44-c4b7957ec905.png)


<br>
<br>

## 평가지표
- 100-SMAPE(Symmetric Mean Absolute Percentage Error) 사용
- 이는 y값의 스케일에 따른 오차 평가 왜곡을 보완하기 위함임


<br>
<br>

## 결과
#### 정량적 결과
약 한 달 반의 예측 결과 78%의 예측성능 보임. 이는 24시간 전 값을 기준으로 한 경우와도 비슷한 성능으로써 급격한 가격 변화에 영향을 미치는 인자 추가 시 더 높은 성능 개선을 기대할 수 있음.
![2-3](https://user-images.githubusercontent.com/30097727/227441298-a39d2063-0a0d-4910-a3d8-6972d994d9e9.png)


#### 의의
정확히 Real time price 예측 서비스를 제공하는 제품과 비교는 어렵지만 시장의 선두 주자인 DAYZER가 LMP(Local Marginal Price)의 예측한 사례를 비교했을 때 LMP와 Real time price의 스케일을 비교해 본다면 모델 고도화를 통한 경쟁 가능성이 충분할 것으로 보임 
